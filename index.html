<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Yii2-conditional-validator : If-then validation rules on Yii2 Framework using core validators">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Yii2-conditional-validator</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/kop/yii2-conditional-validator">View on GitHub</a>

          <h1 id="project_title">Yii2-conditional-validator</h1>
          <h2 id="project_tagline">If-then validation rules on Yii2 Framework using core validators</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/kop/yii2-conditional-validator/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/kop/yii2-conditional-validator/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="yii2-conditional-validator" class="anchor" href="#yii2-conditional-validator" aria-hidden="true"><span class="octicon octicon-link"></span></a>Yii2 Conditional Validator</h1>

<blockquote>
<p>Note:
Since version <code>2.0.0-beta</code>, <a href="http://www.yiiframework.com/doc-2.0/guide-input-validation.html#conditional-validation">Yii2 has it's own conditional validator</a> built in to the core.
Please use validator provided by the framework. This extension <strong>will no receive updates any longer</strong>.</p>
</blockquote>

<p>Yii2 Conditional Validator (Y2CV) validates some attributes depending on certain conditions (rules).
You can use any core validator as you usually would do or any other class based or inline validator.
An interesting feature is that you can even use the own Y2CV inside itself to perform more complex conditions.
Basically, Y2CV executes the rules set in the param <code>if</code> and if there are no errors executes the rules set in the param <code>then</code>.</p>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>Yii 2.0</li>
<li>PHP 5.4</li>
</ul>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>The preferred way to install this extension is through <a href="http://getcomposer.org/">Composer</a>.</p>

<p>Either run</p>

<p><code>php composer.phar require kop/yii2-conditional-validator "dev-master"</code></p>

<p>or add</p>

<p><code>"kop/yii2-conditional-validator": "dev-master"</code></p>

<p>to the <code>require</code> section of your <code>composer.json</code> file.</p>

<h2>
<a id="syntax-example" class="anchor" href="#syntax-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax Example</h2>

<div class="highlight highlight-php"><pre><span class="pl-s2">[[<span class="pl-s1"><span class="pl-pds">'</span>safeAttributes<span class="pl-pds">'</span></span>], <span class="pl-s1"><span class="pl-pds">`</span>path.to.ConditionalValidator<span class="pl-pds">`</span></span>,</span>
<span class="pl-s2">    <span class="pl-s1"><span class="pl-pds">'</span>if<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s2">        <span class="pl-c">// rule1: [['attrX', 'attrY'], 'required', ... ]</span></span>
<span class="pl-s2">        <span class="pl-c">// ruleN: ...</span></span>
<span class="pl-s2">    ],</span>
<span class="pl-s2">    <span class="pl-s1"><span class="pl-pds">'</span>then<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s2">        <span class="pl-c">// rule1: [['attrZ', 'attrG'], 'required', ... ]</span></span>
<span class="pl-s2">        <span class="pl-c">// ruleN: ...</span></span>
<span class="pl-s2">    ]</span>
<span class="pl-s2">]</span></pre></div>

<ul>
<li>
<code>safeAttributes</code>: The name of the attributes that should be turned safe (since Yii has no way to make dynamic validators to turn attributes safe);</li>
<li>
<code>path.to.ConditionalValidator</code>: In the most of cases will be <code>ConditionalValidator::className()</code>;</li>
<li>
<code>if</code>: (bidimensional array) The conditional rules to be validated. <em>Only</em> if they are all valid (i.e., have no errors) then the rules in <code>then</code> will be validated;</li>
<li>
<code>then</code>: (bidimensional array) The rules that will be validated <em>only</em> if there are no errors in rules of <code>if</code> param.</li>
</ul>

<blockquote>
<p>Note:
Errors in the rules set in the param <code>if</code> are discarded after checking. Only errors in the rules set in param <code>then</code> are really kept.</p>
</blockquote>

<h2>
<a id="usage-examples" class="anchor" href="#usage-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage Examples</h2>

<p><code>If</code> <em>customer_type</em> is "active" <code>then</code> <em>birthdate</em> and <em>city</em> are <code>required</code>:</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-s">public</span> <span class="pl-st">function</span> <span class="pl-en">rules</span>()</span>
<span class="pl-s2">{</span>
<span class="pl-s2">    <span class="pl-k">return</span> [</span>
<span class="pl-s2">        [[<span class="pl-s1"><span class="pl-pds">'</span>customer_type<span class="pl-pds">'</span></span>], <span class="pl-s3">ConditionalValidator</span><span class="pl-k">::</span>className(),</span>
<span class="pl-s2">            <span class="pl-s1"><span class="pl-pds">'</span>if<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s2">                [[<span class="pl-s1"><span class="pl-pds">'</span>customer_type<span class="pl-pds">'</span></span>], <span class="pl-s1"><span class="pl-pds">'</span>compare<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>compareValue<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s1"><span class="pl-pds">'</span>active<span class="pl-pds">'</span></span>]</span>
<span class="pl-s2">            ],</span>
<span class="pl-s2">            <span class="pl-s1"><span class="pl-pds">'</span>then<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s2">                [[<span class="pl-s1"><span class="pl-pds">'</span>birthdate<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>city<span class="pl-pds">'</span></span>], <span class="pl-s1"><span class="pl-pds">'</span>required<span class="pl-pds">'</span></span>]</span>
<span class="pl-s2">            ]</span>
<span class="pl-s2">        ]</span>
<span class="pl-s2">    ];</span>
<span class="pl-s2">}</span></pre></div>

<p><code>If</code> <em>customer_type</em> is "inactive" <code>then</code> <em>birthdate</em> and <em>city</em> are <code>required</code> <strong>and</strong> <em>city</em> must be "sao_paulo", "sumare" or "jacarezinho":</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-s">public</span> <span class="pl-st">function</span> <span class="pl-en">rules</span>()</span>
<span class="pl-s2">{</span>
<span class="pl-s2">    <span class="pl-k">return</span> [</span>
<span class="pl-s2">        [[<span class="pl-s1"><span class="pl-pds">'</span>customer_type<span class="pl-pds">'</span></span>], <span class="pl-s3">ConditionalValidator</span><span class="pl-k">::</span>className(),</span>
<span class="pl-s2">            <span class="pl-s1"><span class="pl-pds">'</span>if<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s2">                [[<span class="pl-s1"><span class="pl-pds">'</span>customer_type<span class="pl-pds">'</span></span>], <span class="pl-s1"><span class="pl-pds">'</span>compare<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>compareValue<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s1"><span class="pl-pds">'</span>active<span class="pl-pds">'</span></span>]</span>
<span class="pl-s2">            ),</span>
<span class="pl-s2">            <span class="pl-s1"><span class="pl-pds">'</span>then<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s2">                [[<span class="pl-s1"><span class="pl-pds">'</span>birthdate<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>city<span class="pl-pds">'</span></span>], <span class="pl-s1"><span class="pl-pds">'</span>required<span class="pl-pds">'</span></span>],</span>
<span class="pl-s2">                [[<span class="pl-s1"><span class="pl-pds">'</span>city<span class="pl-pds">'</span></span>], <span class="pl-s1"><span class="pl-pds">'</span>in<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>range<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [<span class="pl-s1"><span class="pl-pds">'</span>sao_paulo<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>sumare<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>jacarezinho<span class="pl-pds">'</span></span>]]</span>
<span class="pl-s2">            ]</span>
<span class="pl-s2">        ]</span>
<span class="pl-s2">    ];</span>
<span class="pl-s2">}</span></pre></div>

<p><code>If</code> <em>information</em> starts with 'http://' <strong>and</strong> has at least 24 chars length <code>then</code> the own <em>information</em> must be a valid url:</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-s">public</span> <span class="pl-st">function</span> <span class="pl-en">rules</span>()</span>
<span class="pl-s2">{</span>
<span class="pl-s2">    <span class="pl-k">return</span> [</span>
<span class="pl-s2">        [[<span class="pl-s1"><span class="pl-pds">'</span>information<span class="pl-pds">'</span></span>], <span class="pl-s3">ConditionalValidator</span><span class="pl-k">::</span>className(),</span>
<span class="pl-s2">            <span class="pl-s1"><span class="pl-pds">'</span>if<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s2">                [[<span class="pl-s1"><span class="pl-pds">'</span>information<span class="pl-pds">'</span></span>], <span class="pl-s1"><span class="pl-pds">'</span>match<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>pattern<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-sr"><span class="pl-pds">'/</span><span class="pl-k">^</span>http:\/\/<span class="pl-pds">/'</span></span>],</span>
<span class="pl-s2">                [[<span class="pl-s1"><span class="pl-pds">'</span>information<span class="pl-pds">'</span></span>], <span class="pl-s1"><span class="pl-pds">'</span>string<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>min<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">24</span>, <span class="pl-s1"><span class="pl-pds">'</span>allowEmpty<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">false</span>]</span>
<span class="pl-s2">            ),</span>
<span class="pl-s2">            <span class="pl-s1"><span class="pl-pds">'</span>then<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s2">                [[<span class="pl-s1"><span class="pl-pds">'</span>information<span class="pl-pds">'</span></span>], <span class="pl-s1"><span class="pl-pds">'</span>url<span class="pl-pds">'</span></span>]</span>
<span class="pl-s2">            ]</span>
<span class="pl-s2">        ]</span>
<span class="pl-s2">    ];</span>
<span class="pl-s2">}</span></pre></div>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p><strong>yii2-conditional-validator</strong> is released under the MIT License. See the bundled <code>LICENSE.md</code> for details.</p>

<h2>
<a id="resources" class="anchor" href="#resources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Resources</h2>

<ul>
<li><a href="http://kop.github.io/yii2-conditional-validator">Project Page</a></li>
<li><a href="https://packagist.org/packages/kop/yii2-conditional-validator">Packagist Package</a></li>
<li><a href="https://github.com/kop/yii2-conditional-validator">Source Code</a></li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Yii2-conditional-validator maintained by <a href="https://github.com/kop">kop</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
